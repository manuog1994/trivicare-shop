webpackHotUpdate("pages/success",{

/***/ "./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=nuxt-legacy-vue-transform!./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=nuxt%3Aimports-transform!./node_modules/babel-loader/lib/index.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=nuxt-legacy-capi-key-transform!./pages/success.vue?vue&type=script&lang=js&":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=nuxt-legacy-vue-transform!./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=nuxt%3Aimports-transform!./node_modules/babel-loader/lib??ref--4-0!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=nuxt-legacy-capi-key-transform!./pages/success.vue?vue&type=script&lang=js& ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/asyncToGenerator */ \"./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\");\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ \"./node_modules/core-js/modules/es.object.to-string.js\");\n/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.string.iterator.js */ \"./node_modules/core-js/modules/es.string.iterator.js\");\n/* harmony import */ var core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_iterator_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/web.dom-collections.iterator.js */ \"./node_modules/core-js/modules/web.dom-collections.iterator.js\");\n/* harmony import */ var core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_iterator_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/web.url-search-params.js */ \"./node_modules/core-js/modules/web.url-search-params.js\");\n/* harmony import */ var core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_url_search_params_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ \"./node_modules/core-js/modules/es.regexp.exec.js\");\n/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.string.search.js */ \"./node_modules/core-js/modules/es.string.search.js\");\n/* harmony import */ var core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_search_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/web.timers.js */ \"./node_modules/core-js/modules/web.timers.js\");\n/* harmony import */ var core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_timers_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! regenerator-runtime/runtime.js */ \"./node_modules/regenerator-runtime/runtime.js\");\n/* harmony import */ var regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(regenerator_runtime_runtime_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({middleware:'token',auth:false,asyncData:function asyncData(_ref){return Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(/*#__PURE__*/regeneratorRuntime.mark(function _callee(){var req,visitorIP,_visitorIP;return regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:req=_ref.req;if(req){_context.next=6;break;}visitorIP='No IP';return _context.abrupt(\"return\",{visitorIP:visitorIP});case 6:_visitorIP=req.headers['x-forwarded-for']||req.connection.remoteAddress||req.socket.remoteAddress||req.connection.socket.remoteAddress;return _context.abrupt(\"return\",{visitorIP:_visitorIP});case 8:case\"end\":return _context.stop();}},_callee);}))();},components:{Loading:function Loading(){return Promise.resolve(/*! import() */).then(__webpack_require__.bind(null, /*! ~/components/Loading.vue */ \"./components/Loading.vue\"));}},beforeCreate:function beforeCreate(){this.loading=true;},data:function data(){return{paymentIntent:null,counter:false,countdownNumbers:'',loading:true,error:false};},beforeMount:function beforeMount(){var url=new URLSearchParams(window.location.search).get('payment_intent_client_secret');if(url!=null){this.paymentIntent=url;}},mounted:function mounted(){var _this=this;return Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(/*#__PURE__*/regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(_this.paymentIntent!=null){_this.orderPaid();}_context2.next=3;return _this.$axios.post('/api/visit',{ip_address:'No IP',page_visited:'success'});case 3:case\"end\":return _context2.stop();}},_callee2);}))();},methods:{orderPaid:function orderPaid(){var _this2=this;return Object(_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(/*#__PURE__*/regeneratorRuntime.mark(function _callee3(){var token_id;return regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:token_id=_this2.paymentIntent;_context3.next=3;return _this2.$axios.post('/api/order-paid/'+token_id).then(function(res){console.log(res.data);_this2.loading=false;_this2.countdown(10);_this2.$store.commit('CLEAR_GUEST');_this2.$store.commit('CLEAR_CART');_this2.$store.commit('CLEAR_CUPON');}).catch(function(err){console.log(err.response.data);_this2.loading=false;_this2.countdown(20);_this2.paymentIntent=null;_this2.error='Ha ocurrido un error, por favor intente nuevamente m√°s tarde.';_this2.$axios.post('/api/error-message',{message:error.response.data.message});});case 3:case\"end\":return _context3.stop();}},_callee3);}))();},// countdown of 10 seconds to redirect to my-orders\ncountdown:function countdown(counter){var _this3=this;var interval=setInterval(function(){_this3.counter=true;_this3.countdownNumbers=counter;counter--;if(counter===0){clearInterval(interval);_this3.$router.push('/');}},1000);},head:function head(){return{titleTemplate:'Estamos procesando su pago... | TriviCare Natural Cosmetics'// link: [\n//     { rel: 'cannonical', href: 'https://trivicare.com/success' }\n// ],\n};}}});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdW5wbHVnaW4vZGlzdC93ZWJwYWNrL2xvYWRlcnMvdHJhbnNmb3JtLmpzP3VucGx1Z2luTmFtZT1udXh0LWxlZ2FjeS12dWUtdHJhbnNmb3JtIS4vbm9kZV9tb2R1bGVzL3VucGx1Z2luL2Rpc3Qvd2VicGFjay9sb2FkZXJzL3RyYW5zZm9ybS5qcz91bnBsdWdpbk5hbWU9bnV4dCUzQWltcG9ydHMtdHJhbnNmb3JtIS4vbm9kZV9tb2R1bGVzL2JhYmVsLWxvYWRlci9saWIvaW5kZXguanM/IS4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL2luZGV4LmpzPyEuL25vZGVfbW9kdWxlcy91bnBsdWdpbi9kaXN0L3dlYnBhY2svbG9hZGVycy90cmFuc2Zvcm0uanM/dW5wbHVnaW5OYW1lPW51eHQtbGVnYWN5LWNhcGkta2V5LXRyYW5zZm9ybSEuL3BhZ2VzL3N1Y2Nlc3MudnVlP3Z1ZSZ0eXBlPXNjcmlwdCZsYW5nPWpzJi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BhZ2VzL3N1Y2Nlc3MudnVlPzE5M2IiXSwic291cmNlc0NvbnRlbnQiOlsiXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgICBtaWRkbGV3YXJlOiAndG9rZW4nLFxuICAgIGF1dGg6IGZhbHNlLFxuXG4gICAgYXN5bmMgYXN5bmNEYXRhICh7IHJlcSB9KSB7XG4gICAgICAgIGlmKCFyZXEpIHtcbiAgICAgICAgICAgIGNvbnN0IHZpc2l0b3JJUCA9ICdObyBJUCdcbiAgICAgICAgICAgIHJldHVybiB7IHZpc2l0b3JJUCB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB2aXNpdG9ySVAgPSByZXEuaGVhZGVyc1sneC1mb3J3YXJkZWQtZm9yJ10gfHwgcmVxLmNvbm5lY3Rpb24ucmVtb3RlQWRkcmVzcyB8fCByZXEuc29ja2V0LnJlbW90ZUFkZHJlc3MgfHwgcmVxLmNvbm5lY3Rpb24uc29ja2V0LnJlbW90ZUFkZHJlc3NcbiAgICAgICAgICAgIHJldHVybiB7IHZpc2l0b3JJUCB9XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgY29tcG9uZW50czoge1xuICAgICAgICBMb2FkaW5nOiAoKSA9PiBpbXBvcnQoJ34vY29tcG9uZW50cy9Mb2FkaW5nLnZ1ZScpLFxuICAgIH0sXG5cbiAgICBiZWZvcmVDcmVhdGUoKSB7XG4gICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7XG4gICAgfSxcblxuICAgIGRhdGEoKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBwYXltZW50SW50ZW50OiBudWxsLFxuICAgICAgICAgICAgY291bnRlcjogZmFsc2UsXG4gICAgICAgICAgICBjb3VudGRvd25OdW1iZXJzOiAnJyxcbiAgICAgICAgICAgIGxvYWRpbmc6IHRydWUsXG4gICAgICAgICAgICBlcnJvcjogZmFsc2UsXG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgYmVmb3JlTW91bnQoKSB7XG4gICAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCkuZ2V0KCdwYXltZW50X2ludGVudF9jbGllbnRfc2VjcmV0Jyk7XG4gICAgICAgIGlmICh1cmwgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5wYXltZW50SW50ZW50ID0gdXJsO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIGFzeW5jIG1vdW50ZWQoKSB7XG4gICAgICAgIGlmKHRoaXMucGF5bWVudEludGVudCAhPSBudWxsKSB7XG4gICAgICAgICAgICB0aGlzLm9yZGVyUGFpZCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgYXdhaXQgdGhpcy4kYXhpb3MucG9zdCgnL2FwaS92aXNpdCcsIHtcbiAgICAgICAgICAgIGlwX2FkZHJlc3M6ICdObyBJUCcsXG4gICAgICAgICAgICBwYWdlX3Zpc2l0ZWQ6ICdzdWNjZXNzJyxcbiAgICAgICAgfSlcbiAgICB9LFxuXG4gICAgbWV0aG9kczoge1xuICAgICAgICBhc3luYyBvcmRlclBhaWQgKCkge1xuICAgICAgICAgICAgY29uc3QgdG9rZW5faWQgPSB0aGlzLnBheW1lbnRJbnRlbnQ7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLiRheGlvcy5wb3N0KCcvYXBpL29yZGVyLXBhaWQvJyArIHRva2VuX2lkKVxuICAgICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzLmRhdGEpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3VudGRvd24oMTApO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ0NMRUFSX0dVRVNUJyk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnQ0xFQVJfQ0FSVCcpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ0NMRUFSX0NVUE9OJyk7XG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIucmVzcG9uc2UuZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY291bnRkb3duKDIwKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXltZW50SW50ZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9ICgnSGEgb2N1cnJpZG8gdW4gZXJyb3IsIHBvciBmYXZvciBpbnRlbnRlIG51ZXZhbWVudGUgbcOhcyB0YXJkZS4nKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYXhpb3MucG9zdCgnL2FwaS9lcnJvci1tZXNzYWdlJywge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gY291bnRkb3duIG9mIDEwIHNlY29uZHMgdG8gcmVkaXJlY3QgdG8gbXktb3JkZXJzXG4gICAgICAgIGNvdW50ZG93bihjb3VudGVyKSB7XG4gICAgICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuY291bnRkb3duTnVtYmVycyA9IGNvdW50ZXI7XG4gICAgICAgICAgICAgICAgY291bnRlci0tO1xuICAgICAgICAgICAgICAgIGlmIChjb3VudGVyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIDEwMDApO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhlYWQoKSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRpdGxlVGVtcGxhdGU6ICdFc3RhbW9zIHByb2Nlc2FuZG8gc3UgcGFnby4uLiB8IFRyaXZpQ2FyZSBOYXR1cmFsIENvc21ldGljcycsXG4gICAgICAgICAgICAgICAgLy8gbGluazogW1xuICAgICAgICAgICAgICAgIC8vICAgICB7IHJlbDogJ2Nhbm5vbmljYWwnLCBocmVmOiAnaHR0cHM6Ly90cml2aWNhcmUuY29tL3N1Y2Nlc3MnIH1cbiAgICAgICAgICAgICAgICAvLyBdLFxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9LFxufVxuIl0sIm1hcHBpbmdzIjoiQUFFQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQTBFQTtBQWdCQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=nuxt-legacy-vue-transform!./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=nuxt%3Aimports-transform!./node_modules/babel-loader/lib/index.js?!./node_modules/vue-loader/lib/index.js?!./node_modules/unplugin/dist/webpack/loaders/transform.js?unpluginName=nuxt-legacy-capi-key-transform!./pages/success.vue?vue&type=script&lang=js&\n");

/***/ })

})