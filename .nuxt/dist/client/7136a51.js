(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{542:function(t,e,r){"use strict";r.r(e);r(37),r(19),r(32),r(40),r(35);var o=r(4),n=(r(63),r(76),r(20),r(9),{auth:!0,name:"Edit",data:function(){return{item:{name:"",description:"",specifications:"",price:"",stock:"",barcode:"",category_id:"",slug:"",status:"",discount:"",weight:"",size:"",dimensions:"",new:"",tags:""},images:[],inputTags:[],products:[],singleProduct:{},tags:[]}},computed:{product:function(){return this.singleProduct},categories:function(){return this.$store.state.categories}},mounted:function(){var t=this;setTimeout((function(){t.getTags()}),1e3)},methods:{beforeOpen:function(t){var e=t.params;this.singleProduct=e,this.getProducts()},getProducts:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/api/products").then((function(e){e.data.data.filter((function(e){e.id===t.singleProduct.id&&(t.item=e)}))})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getCategories:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("getCategories");case 2:case"end":return e.stop()}}),e)})))()},getTags:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/api/tags").then((function(e){t.tags=e.data.data}));case 2:case"end":return e.stop()}}),e)})))()},updateProduct:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.put("/api/products/"+t.item.id,{name:t.$refs.name.value,description:t.$refs.description.value,specifications:t.$refs.specifications.value,price:t.$refs.price.value,stock:t.$refs.stock.value,barcode:t.$refs.barcode.value,category_id:t.$refs.category_id.value,slug:t.$refs.slug.value,discount:t.$refs.discount.value,weight:t.$refs.weight.value,size:t.$refs.size.value,dimensions:t.$refs.dimensions.value,tags:JSON.stringify(t.inputTags)}).then((function(e){t.$notify({title:"El producto se ha actualizado correctamente",type:"success"})})).catch((function(e){console.log(e),t.$notify({title:"Ha ocurrido un error",type:"error"})}));case 2:case"end":return e.stop()}}),e)})))()},deleteTag:function(t){var e=this,r=t.id,o=this.item.id;this.$axios.delete("/api/products/"+o+"/tags/"+r).then((function(t){e.getProducts(),e.$notify({title:"El tag se ha eliminado correctamente",type:"success"})})).catch((function(t){console.log(t),e.$notify({title:"Ha ocurrido un error",type:"error"})}))},deleteImage:function(image){var t=this,e=image.id;this.$axios.delete("/api/images/"+e).then((function(e){t.getProducts(),t.$notify({title:"La imagen se ha eliminado correctamente",type:"success"})})).catch((function(e){console.log(e),t.$notify({title:"Ha ocurrido un error",type:"error"})}))},updateImage:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var o,n,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(e.images=t.target.files,o=new FormData,n=e.images,i=0;i<n.length;i++)o.append("images[]",n[i]);return o.append("product_id",e.item.id),r.next=7,e.$axios.post("/api/images",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.images=[],e.$refs.file.value="",e.getProducts(),e.$notify({title:"La imagen se ha subido correctamente!"})})).catch((function(t){console.log(t),e.$notify({title:"Ha ocurrido un error al subir la imagen!"})}));case 7:case"end":return r.stop()}}),r)})))()}}}),c=r(81),component=Object(c.a)(n,(function(){var t=this,e=t._self._c;return e("modal",{attrs:{name:"edit",width:"800px",scrollable:!0,height:"auto"},on:{"before-open":t.beforeOpen}},[e("div",{staticClass:"mb-2 ps-4 pt-4"},[e("h2",[t._v("Modificar Producto")])]),t._v(" "),e("form",{ref:"updateproduct",staticClass:"row p-5",on:{submit:t.updateProduct}},[e("div",{staticClass:"col-12 mb-2"},[e("label",{attrs:{for:"title"}},[t._v("Título")]),t._v(" "),e("input",{ref:"name",staticClass:"form-control",attrs:{type:"text",name:"name"},domProps:{value:t.item.name}})]),t._v(" "),e("div",{staticClass:"col-12 mb-2"},[e("label",{attrs:{for:"description"}},[t._v("Descripción")]),t._v(" "),e("textarea",{ref:"description",staticClass:"form-control",attrs:{name:"description",id:"description"},domProps:{value:t.item.description}})]),t._v(" "),e("div",{staticClass:"col-12 mb-2"},[e("label",{attrs:{for:"specifications"}},[t._v("Especificaciones")]),t._v(" "),e("textarea",{ref:"specifications",staticClass:"form-control",attrs:{name:"specifications",id:"specifications"},domProps:{value:t.item.specifications}})]),t._v(" "),e("div",{staticClass:"col-3 mb-2"},[e("label",{attrs:{for:"price"}},[t._v("Precio")]),t._v(" "),e("input",{ref:"price",staticClass:"form-control",attrs:{type:"number",name:"price",step:".01"},domProps:{value:t.item.price}})]),t._v(" "),e("div",{staticClass:"col-3 mb-2"},[e("label",{attrs:{for:"stock"}},[t._v("\n                Stock\n            ")]),t._v(" "),e("input",{ref:"stock",staticClass:"form-control",attrs:{type:"number",name:"stock",step:".01"},domProps:{value:t.item.stock}})]),t._v(" "),e("div",{staticClass:"col-6 mb-2"},[e("label",{attrs:{for:"barcode"}},[t._v("Código de Barras")]),t._v(" "),e("input",{ref:"barcode",staticClass:"form-control",attrs:{type:"number",name:"barcode"},domProps:{value:t.item.barcode}})]),t._v(" "),e("div",{staticClass:"col-4 mb-2"},[e("label",{attrs:{for:"category"}},[t._v("Categoría")]),t._v(" "),e("select",{ref:"category_id",staticClass:"form-select",attrs:{name:"category_id"},domProps:{value:t.item.category_id}},t._l(t.categories,(function(r){return e("option",{key:r.id,domProps:{value:r.id}},[t._v(t._s(r.name))])})),0)]),t._v(" "),e("div",{staticClass:"col-8 mb-2"},[e("label",{attrs:{for:"slug"}},[t._v("Slug")]),t._v(" "),e("input",{ref:"slug",staticClass:"form-control",attrs:{type:"text",name:"slug"},domProps:{value:t.item.slug}})]),t._v(" "),e("div",{staticClass:"col-4 mb-2"},[e("label",{attrs:{for:"discount"}},[t._v("Descuento")]),t._v(" "),e("input",{ref:"discount",staticClass:"form-control",attrs:{type:"number",name:"discount",step:".01"},domProps:{value:t.item.discount}})]),t._v(" "),e("div",{staticClass:"col-4 mb-2"},[e("label",{attrs:{for:"weight"}},[t._v("Peso")]),t._v(" "),e("input",{ref:"weight",staticClass:"form-control",attrs:{type:"number",name:"weight",step:".01"},domProps:{value:t.item.weight}})]),t._v(" "),e("div",{staticClass:"col-4 mb-2"},[e("label",{attrs:{for:"size"}},[t._v("Tamaño")]),t._v(" "),e("input",{ref:"size",staticClass:"form-control",attrs:{type:"number",name:"size",step:".01"},domProps:{value:t.item.size}})]),t._v(" "),e("div",{staticClass:"col-12 mb-2 pb-4 border-bottom-1"},[e("label",{attrs:{for:"dimensions"}},[t._v("Dimensiones")]),t._v(" "),e("input",{ref:"dimensions",staticClass:"form-control",attrs:{type:"text",name:"dimensions"},domProps:{value:t.item.dimensions}})]),t._v(" "),e("div",{attrs:{id:"actives"}},[e("div",{staticClass:"mb-2"},[e("h2",{staticClass:"mt-3"},[t._v("Activos")])]),t._v(" "),e("div",{staticClass:"d-flex bg-aqua rounded mb-3"},[e("span",{staticClass:"ms-2"},[t._v("Actuales:")]),t._v(" "),t._l(t.item.tags,(function(r){return e("p",{key:r.id,staticClass:"ms-2"},[t._v("\n                    "+t._s(r.name)+" \n                    "),e("a",{on:{click:function(e){return e.preventDefault(),t.deleteTag(r)}}},[e("i",{staticClass:"fa fa-trash"})])])}))],2),t._v(" "),e("div",{staticClass:"row mt-2 mb-3 pb-3 border-bottom-1"},t._l(t.tags,(function(r){return e("div",{key:r.id,staticClass:"form-check col-3 mb-2"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputTags,expression:"inputTags"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"flexCheckDefault"},domProps:{value:r.id,checked:Array.isArray(t.inputTags)?t._i(t.inputTags,r.id)>-1:t.inputTags},on:{change:function(e){var o=t.inputTags,n=e.target,c=!!n.checked;if(Array.isArray(o)){var l=r.id,m=t._i(o,l);n.checked?m<0&&(t.inputTags=o.concat([l])):m>-1&&(t.inputTags=o.slice(0,m).concat(o.slice(m+1)))}else t.inputTags=c}}}),t._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:"flexCheckDefault"}},[t._v("\n                        "+t._s(r.name)+"\n                    ")])])})),0)]),t._v(" "),e("div",{staticClass:"mb-2"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Guardar")])])]),t._v(" "),e("div",{staticClass:"ps-5 pe-5"},[e("div",{staticClass:"row mb-5"},[e("div",{staticClass:"mb-2"},[e("h2",[t._v("Imágenes")]),t._v(" "),e("p",[t._v("("),e("span",{staticClass:"fw-bold"},[t._v("¡IMPORTANTE!")]),t._v(" Guardar los cambios antes de borrar o subir nuevas imágenes)")])]),t._v(" "),t._l(t.item.images,(function(image){return e("div",{key:image.id,staticClass:"col-3 text-center mb-3"},[e("img",{staticClass:"img-fluid",attrs:{src:"http://localhost:8000/".concat(image.path),alt:t.product.name}}),t._v(" "),e("a",{on:{click:function(e){return e.preventDefault(),t.deleteImage(image)}}},[t._v("Eliminar "),e("i",{staticClass:"fa fa-trash"})])])})),t._v(" "),e("div",{staticClass:"mb-2"},[e("label",{attrs:{for:"images"}},[t._v("Imágenes")]),t._v(" "),e("input",{ref:"file",staticClass:"form-control",attrs:{type:"file",multiple:""},on:{change:t.updateImage}})])],2)])])}),[],!1,null,null,null);e.default=component.exports}}]);