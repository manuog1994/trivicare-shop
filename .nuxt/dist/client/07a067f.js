(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{495:function(t,e){t.exports=function(data,t,e,n){var r=new Blob(void 0!==n?[n,data]:[data],{type:e||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)window.navigator.msSaveBlob(r,t);else{var o=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(r):window.webkitURL.createObjectURL(r),c=document.createElement("a");c.style.display="none",c.href=o,c.setAttribute("download",t),void 0===c.download&&c.setAttribute("target","_blank"),document.body.appendChild(c),c.click(),setTimeout((function(){document.body.removeChild(c),window.URL.revokeObjectURL(o)}),200)}}},586:function(t,e,n){"use strict";n.r(e);var r=n(4),o=(n(63),n(14),n(39),n(76),n(9),n(47),n(27),n(20),n(37),{auth:!0,data:function(){return{orders:[],users:[],order:{},user:{},pagination:{}}},mounted:function(){this.getOrders(),this.getUserName()},computed:{page:function(){var t,e=null!==(t=this.$route.query.page)&&void 0!==t?t:1;return e>this.pagination.last_page?(this.$router.replace({query:{page:this.pagination.last_page}}),this.$router.push(),this.pagination.last_page):e}},watch:{page:function(){var t=this;this.$nextTick((function(){t.$nuxt.$loading.start(),setTimeout((function(){t.$nuxt.$loading.finish()}),500)})),setTimeout((function(){t.getOrders()}),500)}},methods:{getOrders:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/api/orders?perPage=10&sort=-id&page="+t.page+"&history[status]=");case 2:n=e.sent,t.orders=n.data.data,r=n.data,t.pagination={links:r.meta.links,current_page:r.meta.current_page,last_page:r.meta.last_page};case 6:case"end":return e.stop()}}),e)})))()},getUserName:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$axios.get("/api/users").then((function(e){t.users=e.data.data})).catch((function(t){console.log(t)}));case 2:case"end":return e.stop()}}),e)})))()},getName:function(t){return this.users.filter((function(e){if(e.id==t.user_profile_id)return e})).map((function(t){return t.name+" "+t.lastname})).toString()},changePage:function(t){this.$router.replace({query:{page:t.split("page=")[1]}})},getUrl:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=n(495),r.next=3,e.$axios.get("/api/invoices/"+t.invoice.id,{responseType:"blob"}).then((function(e){o(e.data,t.invoice.filename)}));case 3:case"end":return r.stop()}}),r)})))()}}}),c=n(81),component=Object(c.a)(o,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("table",{staticClass:"table"},[t._m(0),t._v(" "),t.orders.length>0?e("tbody",t._l(t.orders,(function(n){return e("tr",{key:n.id},[e("th",{attrs:{scope:"row"}},[t._v(t._s(n.id))]),t._v(" "),e("td",[e("n-link",{attrs:{to:"/orders-profiles/".concat(n.user_id)}},[t._v(t._s(t.getName(n)))])],1),t._v(" "),1==n.paid?e("td",[t._v("Pendiente")]):t._e(),t._v(" "),2==n.paid?e("td",[t._v("En Proceso")]):t._e(),t._v(" "),3==n.paid?e("td",[t._v("Pagado")]):t._e(),t._v(" "),4==n.paid?e("td",[t._v("Rechazado")]):t._e(),t._v(" "),4==n.status?e("td",[t._v("Entregado")]):e("td",[t._v("Cancelado")]),t._v(" "),e("td",[t._v(t._s(n.order_date))]),t._v(" "),e("td",[e("n-link",{staticClass:"btn btn-primary",attrs:{to:"/orders/".concat(n.id)}},[e("i",{staticClass:"pe-7s-look"})]),t._v(" "),3==n.paid&&null!=n.invoice?e("a",{staticClass:"btn btn-warning",on:{click:function(e){return e.preventDefault(),t.getUrl(n)}}},[e("i",{staticClass:"pe-7s-download"})]):t._e()],1)])})),0):e("tbody",[t._m(1)])]),t._v(" "),e("div",{staticClass:"d-flex justify-content-center mt-5"},[e("nav",{attrs:{"aria-label":"..."}},[e("ul",{staticClass:"pagination-custom"},[e("client-only",t._l(t.pagination.links,(function(n){return e("li",{key:"pagination_link-"+n.label,staticClass:"page-link-custom",class:{disabled:null==n.url,active:1==n.active}},[e("a",{staticClass:"page-link",staticStyle:{cursor:"pointer"},domProps:{innerHTML:t._s(n.label)},on:{click:function(e){return e.preventDefault(),t.changePage(n.url)}}})])})),0)],1)])])])])])}),[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}},[t._v("#")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Nombre")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Estado Pago")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Estado Pedido")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Fecha")]),t._v(" "),e("th",{attrs:{scope:"col"}},[t._v("Acciones")])])])},function(){var t=this._self._c;return t("tr",[t("td",{attrs:{colspan:"6"}},[this._v("No hay pedidos pendientes.")])])}],!1,null,null,null);e.default=component.exports}}]);